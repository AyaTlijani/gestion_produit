<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.Image?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="controllers.AdminProductController" spacing="10" alignment="CENTER" stylesheets="@style.css">
    <HBox fx:id="header" styleClass="header" alignment="CENTER">
        <ImageView fx:id="logoImage" styleClass="logo-image">
            <image>
                <Image url="@images/logo.png" />
            </image>
        </ImageView>
        <Label text="ArtisanConnect - Gestion des Produits" styleClass="label" />
    </HBox>

    <GridPane hgap="10" vgap="10">
        <Label text="Nom :" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="label"/>
        <TextField fx:id="nomField" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="text-field"/>

        <Label text="Description :" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="label"/>
        <TextField fx:id="descriptionField" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="text-field"/>

        <Label text="Prix :" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="label"/>
        <TextField fx:id="prixField" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="text-field"/>

        <Label text="Quantité :" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="label"/>
        <TextField fx:id="quantiteField" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="text-field"/>

        <Label text="Catégorie :" GridPane.rowIndex="4" GridPane.columnIndex="0" styleClass="label"/>
        <ComboBox fx:id="categorieComboBox" GridPane.rowIndex="4" GridPane.columnIndex="1" styleClass="combo-box"/>

        <Label text="Disponibilité :" GridPane.rowIndex="5" GridPane.columnIndex="0" styleClass="label"/>
        <CheckBox fx:id="disponibiliteCheck" GridPane.rowIndex="5" GridPane.columnIndex="1" styleClass="check-box"/>

        <Label text="Fournisseur :" GridPane.rowIndex="6" GridPane.columnIndex="0" styleClass="label"/>
        <TextField fx:id="fournisseurField" GridPane.rowIndex="6" GridPane.columnIndex="1" styleClass="text-field"/>

        <Label text="Image :" GridPane.rowIndex="7" GridPane.columnIndex="0" styleClass="label"/>
        <HBox GridPane.rowIndex="7" GridPane.columnIndex="1" spacing="5">
            <Label fx:id="imagePathLabel" text="Aucune image sélectionnée" styleClass="label"/>
            <Button text="Choisir Image" onAction="#chooseImage" fx:id="chooseImageButton" styleClass="button"/>
        </HBox>
    </GridPane>

    <VBox fx:id="overlaySection" spacing="10" alignment="CENTER" visible="false">
        <Label text="Superposition d'Image" styleClass="label"/>
        <Button text="Choisir Image de Fond" onAction="#chooseBackgroundImage" styleClass="button"/>
        <Pane fx:id="overlayPane" prefWidth="400" prefHeight="300" style="-fx-background-color: lightgray;">
            <ImageView fx:id="backgroundImageView" fitWidth="400" fitHeight="300" preserveRatio="true"/>
            <ImageView fx:id="productImageView" fitWidth="100" fitHeight="100" preserveRatio="true" onMousePressed="#startDrag" onMouseDragged="#dragImage"/>
        </Pane>
    </VBox>

    <HBox spacing="10" alignment="CENTER">
        <Button text="Retour" onAction="#goBack" styleClass="button"/>
        <Button text="Enregistrer" onAction="#saveProduit" fx:id="saveButton" styleClass="button" visible="false"/>
        <Button text="Supprimer" onAction="#deleteProduit" fx:id="deleteButton" styleClass="button" visible="false"/>
    </HBox>
</VBox>